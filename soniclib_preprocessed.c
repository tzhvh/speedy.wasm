# 1 "soniclib.c"
# 1 "<built-in>" 1
# 1 "<built-in>" 3
# 376 "<built-in>" 3
# 1 "<command line>" 1
# 1 "<built-in>" 2
# 1 "soniclib.c" 2
# 19 "soniclib.c"
# 1 "/home/mser/.cache/emscripten/sysroot/include/assert.h" 1 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/features.h" 1 3
# 2 "/home/mser/.cache/emscripten/sysroot/include/assert.h" 2 3
# 19 "/home/mser/.cache/emscripten/sysroot/include/assert.h" 3
_Noreturn void __assert_fail (const char *, const char *, int, const char *);
# 20 "soniclib.c" 2
# 1 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 1 3
# 84 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_header_macro.h" 1 3
# 85 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3



# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_ptrdiff_t.h" 1 3
# 18 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_ptrdiff_t.h" 3
typedef long int ptrdiff_t;
# 89 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3




# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_size_t.h" 1 3
# 18 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_size_t.h" 3
typedef long unsigned int size_t;
# 94 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 103 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_wchar_t.h" 1 3
# 24 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_wchar_t.h" 3
typedef int wchar_t;
# 104 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3




# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_null.h" 1 3
# 109 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 123 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_max_align_t.h" 1 3
# 19 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_max_align_t.h" 3
typedef struct {
  long long __clang_max_align_nonce1
      __attribute__((__aligned__(__alignof__(long long))));
  long double __clang_max_align_nonce2
      __attribute__((__aligned__(__alignof__(long double))));
} max_align_t;
# 124 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3




# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_offsetof.h" 1 3
# 129 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 21 "soniclib.c" 2
# 1 "/home/mser/.cache/emscripten/sysroot/include/stdio.h" 1 3




# 1 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 1 3
# 29 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 1 3
# 88 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_ptrdiff_t.h" 1 3
# 89 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3




# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_size_t.h" 1 3
# 94 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 103 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_wchar_t.h" 1 3
# 104 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 128 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/__stddef_offsetof.h" 1 3
# 129 "/opt/emscripten-llvm/lib/clang/21/include/stddef.h" 2 3
# 30 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 2 3
# 1 "/opt/emscripten-llvm/lib/clang/21/include/stdint.h" 1 3
# 56 "/opt/emscripten-llvm/lib/clang/21/include/stdint.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/stdint.h" 1 3
# 20 "/home/mser/.cache/emscripten/sysroot/include/stdint.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 1 3
# 146 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef unsigned long int uintptr_t;
# 161 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef long int intptr_t;
# 177 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef signed char int8_t;




typedef short int16_t;




typedef int int32_t;




typedef long long int int64_t;




typedef long long int intmax_t;




typedef unsigned char uint8_t;




typedef unsigned short uint16_t;




typedef unsigned int uint32_t;




typedef unsigned long long int uint64_t;
# 227 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef unsigned long long int uintmax_t;
# 21 "/home/mser/.cache/emscripten/sysroot/include/stdint.h" 2 3

typedef int8_t int_fast8_t;
typedef int64_t int_fast64_t;

typedef int8_t int_least8_t;
typedef int16_t int_least16_t;
typedef int32_t int_least32_t;
typedef int64_t int_least64_t;

typedef uint8_t uint_fast8_t;
typedef uint64_t uint_fast64_t;

typedef uint8_t uint_least8_t;
typedef uint16_t uint_least16_t;
typedef uint32_t uint_least32_t;
typedef uint64_t uint_least64_t;
# 95 "/home/mser/.cache/emscripten/sysroot/include/stdint.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/bits/stdint.h" 1 3
typedef int32_t int_fast16_t;
typedef int32_t int_fast32_t;
typedef uint32_t uint_fast16_t;
typedef uint32_t uint_fast32_t;
# 96 "/home/mser/.cache/emscripten/sysroot/include/stdint.h" 2 3
# 57 "/opt/emscripten-llvm/lib/clang/21/include/stdint.h" 2 3
# 31 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 2 3





                                                             ;
                                                              ;
                                                              ;
                                                               ;
                                                              ;
                                                               ;
                                                              ;
                                                               ;
                                                            ;







typedef long unsigned int __wasi_size_t;

                                                                  ;
                                                                     ;




typedef uint64_t __wasi_filesize_t;

                                                                      ;
                                                                         ;




typedef uint64_t __wasi_timestamp_t;

                                                                       ;
                                                                          ;




typedef uint32_t __wasi_clockid_t;
# 102 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                     ;
                                                                        ;







typedef uint16_t __wasi_errno_t;
# 498 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                   ;
                                                                      ;




typedef uint64_t __wasi_rights_t;
# 663 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                    ;
                                                                       ;




typedef uint32_t __wasi_fd_t;

                                                                ;
                                                                   ;




typedef struct __wasi_iovec_t {



    uint8_t * buf;




    __wasi_size_t buf_len;

} __wasi_iovec_t;

                                                                   ;
                                                                      ;
                                                                            ;
                                                                                ;




typedef struct __wasi_ciovec_t {



    const uint8_t * buf;




    __wasi_size_t buf_len;

} __wasi_ciovec_t;

                                                                    ;
                                                                       ;
                                                                             ;
                                                                                 ;




typedef int64_t __wasi_filedelta_t;

                                                                       ;
                                                                          ;




typedef uint8_t __wasi_whence_t;
# 744 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                    ;
                                                                       ;






typedef uint64_t __wasi_dircookie_t;

                                                                       ;
                                                                          ;




typedef uint32_t __wasi_dirnamlen_t;

                                                                       ;
                                                                          ;




typedef uint64_t __wasi_inode_t;

                                                                   ;
                                                                      ;




typedef uint8_t __wasi_filetype_t;
# 818 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                      ;
                                                                         ;




typedef struct __wasi_dirent_t {



    __wasi_dircookie_t d_next;




    __wasi_inode_t d_ino;




    __wasi_dirnamlen_t d_namlen;




    __wasi_filetype_t d_type;

} __wasi_dirent_t;

                                                                     ;
                                                                       ;
                                                                                ;
                                                                               ;
                                                                                   ;
                                                                                 ;




typedef uint8_t __wasi_advice_t;
# 889 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                    ;
                                                                       ;




typedef uint16_t __wasi_fdflags_t;
# 924 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                     ;
                                                                        ;




typedef struct __wasi_fdstat_t {



    __wasi_filetype_t fs_filetype;




    __wasi_fdflags_t fs_flags;




    __wasi_rights_t fs_rights_base;





    __wasi_rights_t fs_rights_inheriting;

} __wasi_fdstat_t;

                                                                     ;
                                                                       ;
                                                                                     ;
                                                                                  ;
                                                                                        ;
                                                                                               ;





typedef uint64_t __wasi_device_t;

                                                                    ;
                                                                       ;




typedef uint16_t __wasi_fstflags_t;
# 995 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                      ;
                                                                         ;




typedef uint32_t __wasi_lookupflags_t;






                                                                         ;
                                                                            ;




typedef uint16_t __wasi_oflags_t;
# 1036 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                    ;
                                                                       ;




typedef uint64_t __wasi_linkcount_t;

                                                                       ;
                                                                          ;




typedef struct __wasi_filestat_t {



    __wasi_device_t dev;




    __wasi_inode_t ino;




    __wasi_filetype_t filetype;




    __wasi_linkcount_t nlink;




    __wasi_filesize_t size;




    __wasi_timestamp_t atim;




    __wasi_timestamp_t mtim;




    __wasi_timestamp_t ctim;

} __wasi_filestat_t;

                                                                       ;
                                                                         ;
                                                                               ;
                                                                               ;
                                                                                     ;
                                                                                  ;
                                                                                 ;
                                                                                 ;
                                                                                 ;
                                                                                 ;





typedef uint64_t __wasi_userdata_t;

                                                                      ;
                                                                         ;




typedef uint8_t __wasi_eventtype_t;
# 1136 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                       ;
                                                                          ;





typedef uint16_t __wasi_eventrwflags_t;






                                                                          ;
                                                                             ;





typedef struct __wasi_event_fd_readwrite_t {



    __wasi_filesize_t nbytes;




    __wasi_eventrwflags_t flags;

} __wasi_event_fd_readwrite_t;

                                                                                 ;
                                                                                   ;
                                                                                            ;
                                                                                           ;




typedef union __wasi_event_u_t {



    __wasi_event_fd_readwrite_t fd_readwrite;

} __wasi_event_u_t;

                                                                      ;
                                                                        ;




typedef struct __wasi_event_t {



    __wasi_userdata_t userdata;




    __wasi_errno_t error;




    __wasi_eventtype_t type;




    __wasi_event_u_t u;

} __wasi_event_t;

                                                                    ;
                                                                      ;
                                                                                 ;
                                                                              ;
                                                                              ;
                                                                           ;





typedef uint16_t __wasi_subclockflags_t;
# 1237 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                           ;
                                                                              ;




typedef struct __wasi_subscription_clock_t {



    __wasi_clockid_t id;




    __wasi_timestamp_t timeout;





    __wasi_timestamp_t precision;




    __wasi_subclockflags_t flags;

} __wasi_subscription_clock_t;

                                                                                 ;
                                                                                   ;
                                                                                        ;
                                                                                             ;
                                                                                                ;
                                                                                            ;





typedef struct __wasi_subscription_fd_readwrite_t {



    __wasi_fd_t file_descriptor;

} __wasi_subscription_fd_readwrite_t;

                                                                                       ;
                                                                                          ;
                                                                                                            ;




typedef union __wasi_subscription_u_t {



    __wasi_subscription_clock_t clock;




    __wasi_subscription_fd_readwrite_t fd_readwrite;

} __wasi_subscription_u_t;

                                                                             ;
                                                                               ;




typedef struct __wasi_subscription_t {




    __wasi_userdata_t userdata;




    __wasi_eventtype_t type;




    __wasi_subscription_u_t u;

} __wasi_subscription_t;

                                                                           ;
                                                                             ;
                                                                                        ;
                                                                                    ;
                                                                                  ;




typedef uint32_t __wasi_exitcode_t;

                                                                      ;
                                                                         ;




typedef uint8_t __wasi_signal_t;
# 1536 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                    ;
                                                                       ;




typedef uint16_t __wasi_riflags_t;
# 1554 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                     ;
                                                                        ;




typedef uint16_t __wasi_roflags_t;






                                                                     ;
                                                                        ;





typedef uint16_t __wasi_siflags_t;

                                                                     ;
                                                                        ;




typedef uint8_t __wasi_sdflags_t;
# 1594 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
                                                                     ;
                                                                        ;




typedef uint8_t __wasi_preopentype_t;






                                                                         ;
                                                                            ;




typedef struct __wasi_prestat_dir_t {



    __wasi_size_t pr_name_len;

} __wasi_prestat_dir_t;

                                                                         ;
                                                                            ;
                                                                                          ;




typedef union __wasi_prestat_u_t {



    __wasi_prestat_dir_t dir;

} __wasi_prestat_u_t;

                                                                       ;
                                                                          ;




typedef struct __wasi_prestat_t {



    __wasi_preopentype_t pr_type;




    __wasi_prestat_u_t u;

} __wasi_prestat_t;

                                                                     ;
                                                                        ;
                                                                                  ;
                                                                            ;
# 1669 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
__wasi_errno_t __wasi_args_get(
    uint8_t * * argv,

    uint8_t * argv_buf
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("args_get"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_args_sizes_get(



    __wasi_size_t *argc,



    __wasi_size_t *argv_buf_size
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("args_sizes_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_environ_get(
    uint8_t * * environ,

    uint8_t * environ_buf
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("environ_get"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_environ_sizes_get(



    __wasi_size_t *argc,



    __wasi_size_t *argv_buf_size
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("environ_sizes_get"),
    __warn_unused_result__
));







__wasi_errno_t __wasi_clock_res_get(



    __wasi_clockid_t id,




    __wasi_timestamp_t *resolution
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("clock_res_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_clock_time_get(



    __wasi_clockid_t id,




    __wasi_timestamp_t precision,




    __wasi_timestamp_t *time
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("clock_time_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_advise(
    __wasi_fd_t fd,




    __wasi_filesize_t offset,




    __wasi_filesize_t len,




    __wasi_advice_t advice
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_advise"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_allocate(
    __wasi_fd_t fd,




    __wasi_filesize_t offset,




    __wasi_filesize_t len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_allocate"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_close(
    __wasi_fd_t fd
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_close"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_datasync(
    __wasi_fd_t fd
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_datasync"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_fdstat_get(
    __wasi_fd_t fd,




    __wasi_fdstat_t *stat
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_fdstat_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_fdstat_set_flags(
    __wasi_fd_t fd,




    __wasi_fdflags_t flags
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_fdstat_set_flags"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_fdstat_set_rights(
    __wasi_fd_t fd,




    __wasi_rights_t fs_rights_base,

    __wasi_rights_t fs_rights_inheriting
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_fdstat_set_rights"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_fd_filestat_get(
    __wasi_fd_t fd,




    __wasi_filestat_t *buf
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_filestat_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_filestat_set_size(
    __wasi_fd_t fd,




    __wasi_filesize_t size
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_filestat_set_size"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_filestat_set_times(
    __wasi_fd_t fd,




    __wasi_timestamp_t atim,




    __wasi_timestamp_t mtim,




    __wasi_fstflags_t fst_flags
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_filestat_set_times"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_pread(
    __wasi_fd_t fd,




    const __wasi_iovec_t *iovs,




    size_t iovs_len,




    __wasi_filesize_t offset,




    __wasi_size_t *nread
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_pread"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_fd_prestat_get(
    __wasi_fd_t fd,




    __wasi_prestat_t *buf
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_prestat_get"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_fd_prestat_dir_name(
    __wasi_fd_t fd,




    uint8_t * path,

    __wasi_size_t path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_prestat_dir_name"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_pwrite(
    __wasi_fd_t fd,




    const __wasi_ciovec_t *iovs,




    size_t iovs_len,




    __wasi_filesize_t offset,




    __wasi_size_t *nwritten
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_pwrite"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_read(
    __wasi_fd_t fd,




    const __wasi_iovec_t *iovs,




    size_t iovs_len,




    __wasi_size_t *nread
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_read"),
    __warn_unused_result__
));
# 2098 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
__wasi_errno_t __wasi_fd_readdir(
    __wasi_fd_t fd,




    uint8_t * buf,

    __wasi_size_t buf_len,




    __wasi_dircookie_t cookie,




    __wasi_size_t *bufused
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_readdir"),
    __warn_unused_result__
));
# 2133 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
__wasi_errno_t __wasi_fd_renumber(
    __wasi_fd_t fd,




    __wasi_fd_t to
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_renumber"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_seek(
    __wasi_fd_t fd,




    __wasi_filedelta_t offset,




    __wasi_whence_t whence,




    __wasi_filesize_t *newoffset
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_seek"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_sync(
    __wasi_fd_t fd
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_sync"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_tell(
    __wasi_fd_t fd,




    __wasi_filesize_t *offset
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_tell"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_fd_write(
    __wasi_fd_t fd,




    const __wasi_ciovec_t *iovs,




    size_t iovs_len,




    __wasi_size_t *nwritten
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("fd_write"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_create_directory(
    __wasi_fd_t fd,




    const char *path,




    size_t path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_create_directory"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_filestat_get(
    __wasi_fd_t fd,




    __wasi_lookupflags_t flags,




    const char *path,




    size_t path_len,




    __wasi_filestat_t *buf
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_filestat_get"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_filestat_set_times(
    __wasi_fd_t fd,




    __wasi_lookupflags_t flags,




    const char *path,




    size_t path_len,




    __wasi_timestamp_t atim,




    __wasi_timestamp_t mtim,




    __wasi_fstflags_t fst_flags
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_filestat_set_times"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_link(
    __wasi_fd_t old_fd,




    __wasi_lookupflags_t old_flags,




    const char *old_path,




    size_t old_path_len,




    __wasi_fd_t new_fd,




    const char *new_path,




    size_t new_path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_link"),
    __warn_unused_result__
));
# 2376 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
__wasi_errno_t __wasi_path_open(
    __wasi_fd_t fd,




    __wasi_lookupflags_t dirflags,





    const char *path,




    size_t path_len,




    __wasi_oflags_t oflags,
# 2409 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
    __wasi_rights_t fs_rights_base,

    __wasi_rights_t fs_rights_inherting,

    __wasi_fdflags_t fdflags,




    __wasi_fd_t *opened_fd
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_open"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_readlink(
    __wasi_fd_t fd,




    const char *path,




    size_t path_len,




    uint8_t * buf,

    __wasi_size_t buf_len,




    __wasi_size_t *bufused
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_readlink"),
    __warn_unused_result__
));






__wasi_errno_t __wasi_path_remove_directory(
    __wasi_fd_t fd,




    const char *path,




    size_t path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_remove_directory"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_rename(
    __wasi_fd_t fd,




    const char *old_path,




    size_t old_path_len,




    __wasi_fd_t new_fd,




    const char *new_path,




    size_t new_path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_rename"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_path_symlink(



    const char *old_path,




    size_t old_path_len,

    __wasi_fd_t fd,




    const char *new_path,




    size_t new_path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_symlink"),
    __warn_unused_result__
));






__wasi_errno_t __wasi_path_unlink_file(
    __wasi_fd_t fd,




    const char *path,




    size_t path_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("path_unlink_file"),
    __warn_unused_result__
));




__wasi_errno_t __wasi_poll_oneoff(



    const __wasi_subscription_t * in,




    __wasi_event_t * out,




    __wasi_size_t nsubscriptions,




    __wasi_size_t *nevents
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("poll_oneoff"),
    __warn_unused_result__
));






_Noreturn void __wasi_proc_exit(



    __wasi_exitcode_t rval
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("proc_exit")));





__wasi_errno_t __wasi_proc_raise(



    __wasi_signal_t sig
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("proc_raise"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_sched_yield(
    void
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("sched_yield"),
    __warn_unused_result__
));
# 2652 "/home/mser/.cache/emscripten/sysroot/include/wasi/api.h" 3
__wasi_errno_t __wasi_random_get(



    uint8_t * buf,

    __wasi_size_t buf_len
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("random_get"),
    __warn_unused_result__
));






__wasi_errno_t __wasi_sock_recv(
    __wasi_fd_t fd,




    const __wasi_iovec_t *ri_data,




    size_t ri_data_len,




    __wasi_riflags_t ri_flags,




    __wasi_size_t *ro_datalen,



    __wasi_roflags_t *ro_flags
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("sock_recv"),
    __warn_unused_result__
));






__wasi_errno_t __wasi_sock_send(
    __wasi_fd_t fd,




    const __wasi_ciovec_t *si_data,




    size_t si_data_len,




    __wasi_siflags_t si_flags,




    __wasi_size_t *so_datalen
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("sock_send"),
    __warn_unused_result__
));





__wasi_errno_t __wasi_sock_shutdown(
    __wasi_fd_t fd,




    __wasi_sdflags_t how
) __attribute__((
    __import_module__("wasi_snapshot_preview1"),
    __import_name__("sock_shutdown"),
    __warn_unused_result__
));
# 6 "/home/mser/.cache/emscripten/sysroot/include/stdio.h" 2 3
# 30 "/home/mser/.cache/emscripten/sysroot/include/stdio.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 1 3
# 15 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef __builtin_va_list va_list;




typedef __builtin_va_list __isoc_va_list;
# 141 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef unsigned long int size_t;
# 156 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef long int ssize_t;
# 243 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef long long int off_t;
# 400 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef struct _IO_FILE FILE;
# 31 "/home/mser/.cache/emscripten/sysroot/include/stdio.h" 2 3
# 66 "/home/mser/.cache/emscripten/sysroot/include/stdio.h" 3
typedef union _G_fpos64_t {
 char __opaque[16];
 long long __lldata;
 double __align;
} fpos_t;

extern FILE *const stdin;
extern FILE *const stdout;
extern FILE *const stderr;





FILE *fopen(const char *restrict, const char *restrict);
FILE *freopen(const char *restrict, const char *restrict, FILE *restrict);
int fclose(FILE *);

int remove(const char *);
int rename(const char *, const char *);

int feof(FILE *);
int ferror(FILE *);
int fflush(FILE *);
void clearerr(FILE *);

int fseek(FILE *, long, int);
long ftell(FILE *);
void rewind(FILE *);

int fgetpos(FILE *restrict, fpos_t *restrict);
int fsetpos(FILE *, const fpos_t *);

size_t fread(void *restrict, size_t, size_t, FILE *restrict);
size_t fwrite(const void *restrict, size_t, size_t, FILE *restrict);

int fgetc(FILE *);
int getc(FILE *);
int getchar(void);
int ungetc(int, FILE *);

int fputc(int, FILE *);
int putc(int, FILE *);
int putchar(int);

char *fgets(char *restrict, int, FILE *restrict);




int fputs(const char *restrict, FILE *restrict);
int puts(const char *);

int printf(const char *restrict, ...);
int fprintf(FILE *restrict, const char *restrict, ...);
int sprintf(char *restrict, const char *restrict, ...);
int snprintf(char *restrict, size_t, const char *restrict, ...);

int vprintf(const char *restrict, __isoc_va_list);
int vfprintf(FILE *restrict, const char *restrict, __isoc_va_list);
int vsprintf(char *restrict, const char *restrict, __isoc_va_list);
int vsnprintf(char *restrict, size_t, const char *restrict, __isoc_va_list);

int scanf(const char *restrict, ...);
int fscanf(FILE *restrict, const char *restrict, ...);
int sscanf(const char *restrict, const char *restrict, ...);
int vscanf(const char *restrict, __isoc_va_list);
int vfscanf(FILE *restrict, const char *restrict, __isoc_va_list);
int vsscanf(const char *restrict, const char *restrict, __isoc_va_list);

void perror(const char *);

int setvbuf(FILE *restrict, char *restrict, int, size_t);
void setbuf(FILE *restrict, char *restrict);

char *tmpnam(char *);
FILE *tmpfile(void);




FILE *fmemopen(void *restrict, size_t, const char *restrict);
FILE *open_memstream(char **, size_t *);
FILE *fdopen(int, const char *);
FILE *popen(const char *, const char *);
int pclose(FILE *);
int fileno(FILE *);
int fseeko(FILE *, off_t, int);
off_t ftello(FILE *);
int dprintf(int, const char *restrict, ...);
int vdprintf(int, const char *restrict, __isoc_va_list);
void flockfile(FILE *);
int ftrylockfile(FILE *);
void funlockfile(FILE *);
int getc_unlocked(FILE *);
int getchar_unlocked(void);
int putc_unlocked(int, FILE *);
int putchar_unlocked(int);
ssize_t getdelim(char **restrict, size_t *restrict, int, FILE *restrict);
ssize_t getline(char **restrict, size_t *restrict, FILE *restrict);
int renameat(int, const char *, int, const char *);
char *ctermid(char *);







char *tempnam(const char *, const char *);




char *cuserid(char *);
void setlinebuf(FILE *);
void setbuffer(FILE *, char *, size_t);
int fgetc_unlocked(FILE *);
int fputc_unlocked(int, FILE *);
int fflush_unlocked(FILE *);
size_t fread_unlocked(void *, size_t, size_t, FILE *);
size_t fwrite_unlocked(const void *, size_t, size_t, FILE *);
void clearerr_unlocked(FILE *);
int feof_unlocked(FILE *);
int ferror_unlocked(FILE *);
int fileno_unlocked(FILE *);
int getw(FILE *);
int putw(int, FILE *);
char *fgetln(FILE *, size_t *);
int asprintf(char **, const char *, ...);
int vasprintf(char **, const char *, __isoc_va_list);
# 22 "soniclib.c" 2
# 1 "/home/mser/.cache/emscripten/sysroot/include/compat/stdlib.h" 1 3







int getloadavg(double loadavg[], int nelem);





# 1 "/home/mser/.cache/emscripten/sysroot/include/stdlib.h" 1 3
# 21 "/home/mser/.cache/emscripten/sysroot/include/stdlib.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 1 3
# 40 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 3
typedef int wchar_t;
# 22 "/home/mser/.cache/emscripten/sysroot/include/stdlib.h" 2 3

int atoi (const char *);
long atol (const char *);
long long atoll (const char *);
double atof (const char *);

float strtof (const char *restrict, char **restrict);
double strtod (const char *restrict, char **restrict);
long double strtold (const char *restrict, char **restrict);

long strtol (const char *restrict, char **restrict, int);
unsigned long strtoul (const char *restrict, char **restrict, int);
long long strtoll (const char *restrict, char **restrict, int);
unsigned long long strtoull (const char *restrict, char **restrict, int);

int rand (void);
void srand (unsigned);

void *malloc (size_t);
void *calloc (size_t, size_t);
void *realloc (void *, size_t);
void free (void *);
void *aligned_alloc(size_t, size_t);

_Noreturn void abort (void);
int atexit (void (*) (void));
_Noreturn void exit (int);
_Noreturn void _Exit (int);
int at_quick_exit (void (*) (void));
_Noreturn void quick_exit (int);

char *getenv (const char *);

int system (const char *);

void *bsearch (const void *, const void *, size_t, size_t, int (*)(const void *, const void *));
void qsort (void *, size_t, size_t, int (*)(const void *, const void *));

int abs (int);
long labs (long);
long long llabs (long long);

typedef struct { int quot, rem; } div_t;
typedef struct { long quot, rem; } ldiv_t;
typedef struct { long long quot, rem; } lldiv_t;

div_t div (int, int);
ldiv_t ldiv (long, long);
lldiv_t lldiv (long long, long long);

int mblen (const char *, size_t);
int mbtowc (wchar_t *restrict, const char *restrict, size_t);
int wctomb (char *, wchar_t);
size_t mbstowcs (wchar_t *restrict, const char *restrict, size_t);
size_t wcstombs (char *restrict, const wchar_t *restrict, size_t);




size_t __ctype_get_mb_cur_max(void);
# 101 "/home/mser/.cache/emscripten/sysroot/include/stdlib.h" 3
int posix_memalign (void **, size_t, size_t);
int setenv (const char *, const char *, int);
int unsetenv (const char *);
int mkstemp (char *);
int mkostemp (char *, int);
char *mkdtemp (char *);
int getsubopt (char **, char *const *, char **);
int rand_r (unsigned *);






char *realpath (const char *restrict, char *restrict);
long int random (void);
void srandom (unsigned int);
char *initstate (unsigned int, char *, size_t);
char *setstate (char *);
int putenv (char *);
int posix_openpt (int);
int grantpt (int);
int unlockpt (int);
char *ptsname (int);
char *l64a (long);
long a64l (const char *);
void setkey (const char *);
double drand48 (void);
double erand48 (unsigned short [3]);
long int lrand48 (void);
long int nrand48 (unsigned short [3]);
long mrand48 (void);
long jrand48 (unsigned short [3]);
void srand48 (long);
unsigned short *seed48 (unsigned short [3]);
void lcong48 (unsigned short [7]);



# 1 "/home/mser/.cache/emscripten/sysroot/include/alloca.h" 1 3








# 1 "/home/mser/.cache/emscripten/sysroot/include/bits/alltypes.h" 1 3
# 10 "/home/mser/.cache/emscripten/sysroot/include/alloca.h" 2 3

void *alloca(size_t);
# 141 "/home/mser/.cache/emscripten/sysroot/include/stdlib.h" 2 3
char *mktemp (char *);
int mkstemps (char *, int);
int mkostemps (char *, int, int);
void *valloc (size_t);
void *memalign(size_t, size_t);
int getloadavg(double *, int);
int clearenv(void);


void *reallocarray (void *, size_t, size_t);
void qsort_r (void *, size_t, size_t, int (*)(const void *, const void *, void *), void *);
# 15 "/home/mser/.cache/emscripten/sysroot/include/compat/stdlib.h" 2 3
# 23 "soniclib.c" 2
# 1 "./sonic2.h" 1
# 35 "./sonic2.h"
# 1 "deps/sonic/sonic.h" 1
# 137 "deps/sonic/sonic.h"
struct sonicStreamStruct;
typedef struct sonicStreamStruct* sonicStream;






sonicStream sonicIntCreateStream(int sampleRate, int numChannels);

void sonicIntDestroyStream(sonicStream stream);

void sonicIntSetUserData(sonicStream stream, void *userData);

void *sonicIntGetUserData(sonicStream stream);



int sonicIntWriteFloatToStream(sonicStream stream, const float* samples, int numSamples);


int sonicIntWriteShortToStream(sonicStream stream, const short* samples, int numSamples);


int sonicIntWriteUnsignedCharToStream(sonicStream stream, const unsigned char* samples,
                                   int numSamples);


int sonicIntReadFloatFromStream(sonicStream stream, float* samples,
                             int maxSamples);


int sonicIntReadShortFromStream(sonicStream stream, short* samples,
                             int maxSamples);


int sonicIntReadUnsignedCharFromStream(sonicStream stream, unsigned char* samples,
                                    int maxSamples);



int sonicIntFlushStream(sonicStream stream);

int sonicIntSamplesAvailable(sonicStream stream);

float sonicIntGetSpeed(sonicStream stream);

void sonicIntSetSpeed(sonicStream stream, float speed);

float sonicIntGetPitch(sonicStream stream);

void sonicIntSetPitch(sonicStream stream, float pitch);

float sonicIntGetRate(sonicStream stream);

void sonicIntSetRate(sonicStream stream, float rate);

float sonicIntGetVolume(sonicStream stream);

void sonicIntSetVolume(sonicStream stream, float volume);



int sonicGetChordPitch(sonicStream stream);


void sonicSetChordPitch(sonicStream stream, int useChordPitch);

int sonicIntGetQuality(sonicStream stream);


void sonicIntSetQuality(sonicStream stream, int quality);

int sonicIntGetSampleRate(sonicStream stream);


void sonicIntSetSampleRate(sonicStream stream, int sampleRate);

int sonicIntGetNumChannels(sonicStream stream);


void sonicIntSetNumChannels(sonicStream stream, int numChannels);




int sonicIntChangeFloatSpeed(float* samples, int numSamples, float speed,
                          float pitch, float rate, float volume,
                          int useChordPitch, int sampleRate, int numChannels);




int sonicIntChangeShortSpeed(short* samples, int numSamples, float speed,
                          float pitch, float rate, float volume,
                          int useChordPitch, int sampleRate, int numChannels);
# 36 "./sonic2.h" 2
# 54 "./sonic2.h"
sonicStream sonicCreateStream(int sampleRate, int numChannels);
void sonicDestroyStream(sonicStream mySonicStream);




int sonicWriteShortToStream(sonicStream mySonicStream, const short int* inBuffer,
                             int sampleCount);
int sonicReadShortFromStream(sonicStream mySonicStream, short* outBuffer,
                              int bufferSize);

int sonicWriteFloatToStream(sonicStream mySonicStream, const float* inBuffer,
                             int sampleCount);
int sonicReadFloatFromStream(sonicStream mySonicStream, float* outBuffer,
                              int bufferSize);

int sonicIntSamplesAvailable(sonicStream stream);

void sonicSetRate(sonicStream mySonicStream, float rate);
void sonicSetSpeed(sonicStream mySonicStream, float rate);
int sonicFlushStream(sonicStream mySonicStream);
# 85 "./sonic2.h"
void sonicEnableNonlinearSpeedup(sonicStream mySonicStream,
                                 float nonlinearFactor);







void sonicSetDurationFeedbackStrength(sonicStream mySonicStream, float factor);




int getSonicBufferSize(sonicStream mySonicStream);






typedef void (*tensionFunction)(sonicStream myStream, int time, float tension);
void sonicTensionCallback(sonicStream mySonicStream, tensionFunction);
tensionFunction getSonicTensionCallback(sonicStream mySonicStream);

typedef void (*speedFunction)(sonicStream myStream, int time, float speed);
void sonicSpeedCallback(sonicStream mySonicStream, speedFunction);
tensionFunction getSonicSpeedCallback(sonicStream mySonicStream);

typedef void (*featuresFunction)(sonicStream myStream, int time,
                                 float *features);
void sonicFeaturesCallback(sonicStream mySonicStream, featuresFunction);
featuresFunction getSonicFeaturesCallback(sonicStream mySonicStream);

typedef void (*spectrogramFunction)(sonicStream myStream, int time,
                                    float* spectrogram);
void sonicSpectrogramCallback(sonicStream mySonicStream, spectrogramFunction);
spectrogramFunction getSonicSpectrogramCallback(sonicStream mySonicStream);
void sonicNormalizedSpectrogramCallback(sonicStream mySonicStream,
                                        spectrogramFunction);
spectrogramFunction getSonicNormalizedSpectrogramCallback(
    sonicStream mySonicStream);
int sonicSpectrogramSize(sonicStream mySonicStream);
# 24 "soniclib.c" 2
# 1 "./speedy.h" 1
# 55 "./speedy.h"
struct speedyStreamStruct;
typedef struct speedyStreamStruct* speedyStream;




speedyStream speedyCreateStream(int sample_rate);
void speedyDestroyStream(speedyStream stream);




int speedyInputFrameSize(speedyStream stream);
int speedyInputFrameStep(speedyStream stream);





void speedyAddData(speedyStream stream, const float input[], int64_t at_time);
void speedyAddDataShort(speedyStream stream, const int16_t input[],
                        int64_t at_time);






int speedyComputeTension(speedyStream stream, int64_t at_time, float* tension);
float speedyComputeSpeedFromTension(float tension, float R_g,
                                    float duration_feedback_strength,
                                    speedyStream stream);
int64_t speedyGetCurrentTime(speedyStream stream);




float* speedySpectrogram(speedyStream stream, float input[]);
int speedyFFTSize(speedyStream stream);
float speedyBinToFreq(speedyStream stream, int bin_number);
int speedyFreqToBin(speedyStream stream, float freq);

float speedyEvaluateHysteresis(speedyStream stream, int64_t at_time);
void speedyAddToHysteresisBuffer(speedyStream stream, float value,
                                 int64_t at_time);
void speedyComputeSpectralDifference(speedyStream stream,
                                     const float *spectrogram,
                                     const float *last_spectrogram,
                                     int64_t at_time);
void speedyComputeLocalEnergy(speedyStream stream, float* spectrogram,
                              int64_t at_time);
void speedySaveSpectrogramData(speedyStream stream, float spectrogram[],
                               int64_t at_time);
float* speedyGetSpectrogramAtTime(speedyStream stream, int64_t at_time);

void speedyPreemphasisFilter(speedyStream stream, float *input, int length);

float* speedyGetNormalizedSpectrogram(speedyStream stream);
float* speedyGetSpectrogram(speedyStream stream);


float* speedyGetInternalState(speedyStream stream);
float* speedyGetInternalSpectrogram(speedyStream stream);
float* speedyGetInternalNormalizedSpectrogram(speedyStream stream);
float speedyGetEnergyCompressed(speedyStream stream);
float speedyGetSpeechChanges(speedyStream stream);
float speedyNormalizeByEnergy(const float* spectrogram, float* normalized,
                               int length);


struct FirstOrderFilterStruct;
typedef struct FirstOrderFilterStruct* FirstOrderFilter;

FirstOrderFilter CreateFirstOrderFilter(float time_constant_in_samples);
void DesignFirstOrderLowpassFilter(FirstOrderFilter fof,
                                   float time_constant_in_samples);
float IterateFirstOrderFilter(FirstOrderFilter fof, float input);
void ResetFirstOrderFilter(FirstOrderFilter fof);
void DeleteFirstOrderFilter(FirstOrderFilter fof);
# 25 "soniclib.c" 2
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten.h" 1 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 1 3
# 23 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_asm.h" 1 3
# 20 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_asm.h" 3
__attribute__((nothrow))
int emscripten_asm_const_int(const char* code, const char* arg_sigs, ...);
__attribute__((nothrow))
void* emscripten_asm_const_ptr(const char* code, const char* arg_sigs, ...);
__attribute__((nothrow))
double emscripten_asm_const_double(const char* code, const char* arg_sigs, ...);

__attribute__((nothrow))
int emscripten_asm_const_int_sync_on_main_thread(
  const char* code, const char* arg_sigs, ...);
__attribute__((nothrow))
void* emscripten_asm_const_ptr_sync_on_main_thread(
  const char* code, const char* arg_sigs, ...);
__attribute__((nothrow))
double emscripten_asm_const_double_sync_on_main_thread(
  const char* code, const char* arg_sigs, ...);

__attribute__((nothrow))
void emscripten_asm_const_async_on_main_thread(
  const char* code, const char* arg_sigs, ...);
# 24 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_macros.h" 1 3
# 25 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_types.h" 1 3







# 1 "/opt/emscripten-llvm/lib/clang/21/include/stdbool.h" 1 3
# 9 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_types.h" 2 3







typedef short __attribute__((aligned(1))) emscripten_align1_short;

typedef long long __attribute__((aligned(4))) emscripten_align4_int64;
typedef long long __attribute__((aligned(2))) emscripten_align2_int64;
typedef long long __attribute__((aligned(1))) emscripten_align1_int64;

typedef int __attribute__((aligned(2))) emscripten_align2_int;
typedef int __attribute__((aligned(1))) emscripten_align1_int;

typedef float __attribute__((aligned(2))) emscripten_align2_float;
typedef float __attribute__((aligned(1))) emscripten_align1_float;

typedef double __attribute__((aligned(4))) emscripten_align4_double;
typedef double __attribute__((aligned(2))) emscripten_align2_double;
typedef double __attribute__((aligned(1))) emscripten_align1_double;

typedef void (*em_callback_func)(void);
typedef void (*em_arg_callback_func)(void*);
typedef void (*em_str_callback_func)(const char *);
# 26 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/em_js.h" 1 3
# 27 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 1 3
# 19 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
typedef struct _em_promise* em_promise_t;

typedef enum em_promise_result_t {
  EM_PROMISE_FULFILL,
  EM_PROMISE_MATCH,
  EM_PROMISE_MATCH_RELEASE,
  EM_PROMISE_REJECT,
} em_promise_result_t;
# 54 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
typedef em_promise_result_t (*em_promise_callback_t)(void** result,
                                                     void* data,
                                                     void* value);




__attribute__((warn_unused_result)) em_promise_t
emscripten_promise_create(void);







void emscripten_promise_destroy(em_promise_t promise);
# 79 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
void emscripten_promise_resolve(em_promise_t promise,
                                em_promise_result_t result,
                                void* value);






__attribute__((warn_unused_result)) em_promise_t
emscripten_promise_then(em_promise_t promise,
                        em_promise_callback_t on_fulfilled,
                        em_promise_callback_t on_rejected,
                        void* data);
# 101 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
__attribute__((warn_unused_result)) em_promise_t emscripten_promise_all(
  em_promise_t* promises, void** results, size_t num_promises);

typedef struct em_settled_result_t {
  em_promise_result_t result;
  void* value;
} em_settled_result_t;
# 116 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
__attribute__((warn_unused_result)) em_promise_t emscripten_promise_all_settled(
  em_promise_t* promises, em_settled_result_t* results, size_t num_promises);
# 127 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
__attribute__((warn_unused_result)) em_promise_t emscripten_promise_any(
  em_promise_t* promises, void** errors, size_t num_promises);






__attribute__((warn_unused_result)) em_promise_t
emscripten_promise_race(em_promise_t* promises, size_t num_promises);
# 146 "/home/mser/.cache/emscripten/sysroot/include/emscripten/promise.h" 3
__attribute__((warn_unused_result)) em_settled_result_t
emscripten_promise_await(em_promise_t promise);
# 28 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/wget.h" 1 3
# 18 "/home/mser/.cache/emscripten/sysroot/include/emscripten/wget.h" 3
void emscripten_async_wget(const char* url, const char* file, em_str_callback_func onload, em_str_callback_func onerror);

typedef void (*em_async_wget_onload_func)(void* userdata, void* data, int size);
void emscripten_async_wget_data(const char* url, void *userdata, em_async_wget_onload_func onload, em_arg_callback_func onerror);

typedef void (*em_async_wget2_onload_func)(unsigned handle, void* userdata, const char* data);
typedef void (*em_async_wget2_onstatus_func)(unsigned handle, void* userdata, int status);

int emscripten_async_wget2(const char* url, const char* file, const char* requesttype, const char* param, void *userdata, em_async_wget2_onload_func onload, em_async_wget2_onstatus_func onerror, em_async_wget2_onstatus_func onprogress);

typedef void (*em_async_wget2_data_onload_func)(unsigned handle, void* userdata, void* data, unsigned size);
typedef void (*em_async_wget2_data_onerror_func)(unsigned handle, void* userdata, int status, const char* status_text);
typedef void (*em_async_wget2_data_onprogress_func)(unsigned handle, void* userdata, int loaded, int total);

int emscripten_async_wget2_data(const char* url, const char* requesttype, const char* param, void *arg, int free, em_async_wget2_data_onload_func onload, em_async_wget2_data_onerror_func onerror, em_async_wget2_data_onprogress_func onprogress);

void emscripten_async_wget2_abort(int handle);



int emscripten_wget(const char* url, const char* file);

void emscripten_wget_data(const char* url, void** pbuffer, int* pnum, int *perror);
# 29 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3
# 1 "/home/mser/.cache/emscripten/sysroot/include/emscripten/version.h" 1 3
# 30 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 2 3





void emscripten_run_script(const char *script __attribute__((nonnull)));
int emscripten_run_script_int(const char *script __attribute__((nonnull)));
char *emscripten_run_script_string(const char *script __attribute__((nonnull)));
void emscripten_async_run_script(const char *script __attribute__((nonnull)), int millis);
void emscripten_async_load_script(const char *script __attribute__((nonnull)), em_callback_func onload, em_callback_func onerror);

void emscripten_set_main_loop(em_callback_func func, int fps, _Bool simulate_infinite_loop);





int emscripten_set_main_loop_timing(int mode, int value);
void emscripten_get_main_loop_timing(int *mode, int *value);
void emscripten_set_main_loop_arg(em_arg_callback_func func, void *arg, int fps, _Bool simulate_infinite_loop);
void emscripten_pause_main_loop(void);
void emscripten_resume_main_loop(void);
void emscripten_cancel_main_loop(void);

typedef void (*em_socket_callback)(int fd, void *userData);
typedef void (*em_socket_error_callback)(int fd, int err, const char* msg, void *userData);

void emscripten_set_socket_error_callback(void *userData, em_socket_error_callback callback);
void emscripten_set_socket_open_callback(void *userData, em_socket_callback callback);
void emscripten_set_socket_listen_callback(void *userData, em_socket_callback callback);
void emscripten_set_socket_connection_callback(void *userData, em_socket_callback callback);
void emscripten_set_socket_message_callback(void *userData, em_socket_callback callback);
void emscripten_set_socket_close_callback(void *userData, em_socket_callback callback);

void _emscripten_push_main_loop_blocker(em_arg_callback_func func, void *arg, const char *name);
void _emscripten_push_uncounted_main_loop_blocker(em_arg_callback_func func, void *arg, const char *name);





void emscripten_set_main_loop_expected_blockers(int num);

void emscripten_async_call(em_arg_callback_func func, void *arg, int millis);

void emscripten_exit_with_live_runtime(void) __attribute__((__noreturn__));
void emscripten_force_exit(int status) __attribute__((__noreturn__));

double emscripten_get_device_pixel_ratio(void);

char *emscripten_get_window_title(void);
void emscripten_set_window_title(const char *);
void emscripten_get_screen_size(int *width __attribute__((nonnull)), int *height __attribute__((nonnull)));
void emscripten_hide_mouse(void);
void emscripten_set_canvas_size(int width, int height) __attribute__((deprecated("This variant does not allow specifying the target canvas", "Use emscripten_set_canvas_element_size() instead")));
void emscripten_get_canvas_size(int *width __attribute__((nonnull)), int *height __attribute__((nonnull)), int *isFullscreen __attribute__((nonnull))) __attribute__((deprecated("This variant does not allow specifying the target canvas", "Use emscripten_get_canvas_element_size() and emscripten_get_fullscreen_status() instead")));

double emscripten_get_now(void);
float emscripten_random(void);



typedef void (*em_idb_onload_func)(void*, void*, int);
void emscripten_idb_async_load(const char *db_name __attribute__((nonnull)), const char *file_id __attribute__((nonnull)), void* arg, em_idb_onload_func onload, em_arg_callback_func onerror);
void emscripten_idb_async_store(const char *db_name __attribute__((nonnull)), const char *file_id __attribute__((nonnull)), void* ptr, int num, void* arg, em_arg_callback_func onstore, em_arg_callback_func onerror);
void emscripten_idb_async_delete(const char *db_name __attribute__((nonnull)), const char *file_id __attribute__((nonnull)), void* arg, em_arg_callback_func ondelete, em_arg_callback_func onerror);
typedef void (*em_idb_exists_func)(void*, int);
void emscripten_idb_async_exists(const char *db_name __attribute__((nonnull)), const char *file_id __attribute__((nonnull)), void* arg, em_idb_exists_func oncheck, em_arg_callback_func onerror);
void emscripten_idb_async_clear(const char *db_name __attribute__((nonnull)), void* arg, em_arg_callback_func onclear, em_arg_callback_func onerror);



void emscripten_idb_load(const char *db_name, const char *file_id, void** pbuffer, int* pnum, int *perror);
void emscripten_idb_store(const char *db_name, const char *file_id, void* buffer, int num, int *perror);
void emscripten_idb_delete(const char *db_name, const char *file_id, int *perror);
void emscripten_idb_exists(const char *db_name, const char *file_id, int* pexists, int *perror);
void emscripten_idb_clear(const char *db_name, int *perror);

void emscripten_idb_load_blob(const char *db_name, const char *file_id, int* pblob, int *perror);
void emscripten_idb_store_blob(const char *db_name, const char *file_id, void* buffer, int num, int *perror);
void emscripten_idb_read_from_blob(int blob, int start, int num, void* buffer);
void emscripten_idb_free_blob(int blob);



int emscripten_run_preload_plugins(const char* file, em_str_callback_func onload, em_str_callback_func onerror);

typedef void (*em_run_preload_plugins_data_onload_func)(void*, const char*);
void emscripten_run_preload_plugins_data(char* data, int size, const char *suffix, void *arg, em_run_preload_plugins_data_onload_func onload, em_arg_callback_func onerror);

void emscripten_lazy_load_code(void);







typedef int worker_handle;

worker_handle emscripten_create_worker(const char *url);
void emscripten_destroy_worker(worker_handle worker);

typedef void (*em_worker_callback_func)(char*, int, void*);
void emscripten_call_worker(worker_handle worker, const char *funcname, char *data, int size, em_worker_callback_func callback, void *arg);
void emscripten_worker_respond(char *data, int size);
void emscripten_worker_respond_provisionally(char *data, int size);

int emscripten_get_worker_queue_size(worker_handle worker);



long emscripten_get_compiler_setting(const char *name);
int emscripten_has_asyncify(void);

void emscripten_debugger(void);


struct _IO_FILE;
typedef struct _IO_FILE FILE;

char *emscripten_get_preloaded_image_data(const char *path, int *w, int *h);
char *emscripten_get_preloaded_image_data_from_FILE(FILE *file, int *w, int *h);
# 167 "/home/mser/.cache/emscripten/sysroot/include/emscripten/emscripten.h" 3
void emscripten_log(int flags, const char* format, ...);

int emscripten_get_callstack(int flags, char *out, int maxbytes);

int emscripten_print_double(double x, char *to, signed max);

typedef void (*em_scan_func)(void*, void*);
void emscripten_scan_registers(em_scan_func func);
void emscripten_scan_stack(em_scan_func func);



typedef void (*em_dlopen_callback)(void* user_data, void* handle);
void emscripten_dlopen(const char *filename, int flags, void* user_data, em_dlopen_callback onsuccess, em_arg_callback_func onerror);




em_promise_t emscripten_dlopen_promise(const char *filename, int flags);

void emscripten_throw_number(double number);
void emscripten_throw_string(const char *utf8String);





void emscripten_sleep(unsigned int ms);
# 2 "/home/mser/.cache/emscripten/sysroot/include/emscripten.h" 2 3
# 26 "soniclib.c" 2
# 66 "soniclib.c"
struct speedyConnectionStruct {
  speedyStream mySpeedyStream;
  float globalSpeed;
  float speedyNonlinearFactor;
  float speedyDurationFeedbackStrength;
  float sampleRate;
  int channelCount;
  int bufferCount;
  int bufferSize;
  short** bufferList;
  float* tensionList;
  short* speedyInputBuffer;
  int readBufferFrameIndex;
  int speedyBufferFrameIndex;
  int writeBufferFrameIndex;
  int writeBufferFrameLocation;
  void (*returnTension)(sonicStream, int, float);
  void (*returnSpeed)(sonicStream, int, float);
  void (*returnFeatures)(sonicStream, int, float*);
  void (*returnSpectrogram)(sonicStream, int, float*);
  void (*returnNormalizedSpectrogram)(sonicStream, int, float*);
};
typedef struct speedyConnectionStruct* speedyConnection;
# 98 "soniclib.c"
sonicStream sonicCreateStream(int sampleRate, int numChannels){
  sonicStream mySonicStream = sonicIntCreateStream(sampleRate, numChannels);
  if (!mySonicStream) {
    return ((void*)0);
  }
  sonicIntSetUserData(mySonicStream, ((void*)0));

  speedyConnection mySpeedyConnector = (speedyConnection)
      calloc(1, sizeof(struct speedyConnectionStruct));
  if (!mySpeedyConnector) {
    sonicDestroyStream(mySonicStream);
    return ((void*)0);
  }
  sonicIntSetUserData(mySonicStream, mySpeedyConnector);

  speedyStream mySpeedyStream = speedyCreateStream(sampleRate);
  if (!mySpeedyStream) {
    sonicDestroyStream(mySonicStream);
    return ((void*)0);
  }
  mySpeedyConnector->mySpeedyStream = mySpeedyStream;
  mySpeedyConnector->globalSpeed = 1.0;
  mySpeedyConnector->sampleRate = sampleRate;
  mySpeedyConnector->channelCount = numChannels;
  mySpeedyConnector->speedyNonlinearFactor = 0.0;




  mySpeedyConnector->speedyDurationFeedbackStrength = 0.1;
  mySpeedyConnector->returnTension = 0;
  mySpeedyConnector->returnSpeed = 0;
  mySpeedyConnector->returnFeatures = 0;
  mySpeedyConnector->returnSpectrogram = 0;
  mySpeedyConnector->returnNormalizedSpectrogram = 0;
  mySpeedyConnector->readBufferFrameIndex = 0;
  mySpeedyConnector->speedyBufferFrameIndex = 0;
  mySpeedyConnector->writeBufferFrameIndex = 0;
  mySpeedyConnector->writeBufferFrameLocation = 0;

  return mySonicStream;
}






void sonicDestroyStream(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 147, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  sonicIntDestroyStream(mySonicStream);
  if (mySpeedyConnector) {
    if (mySpeedyConnector->mySpeedyStream) {
      speedyDestroyStream(mySpeedyConnector->mySpeedyStream);
    }
    if (mySpeedyConnector->bufferCount > 0 && mySpeedyConnector->bufferList) {
      int i;
      for (i=0; i<mySpeedyConnector->bufferCount; i++) {
        if (mySpeedyConnector->bufferList[i]) {
          free(mySpeedyConnector->bufferList[i]);
        }
      }
      free(mySpeedyConnector->bufferList);
    }
    if (mySpeedyConnector->speedyInputBuffer) {
      free(mySpeedyConnector->speedyInputBuffer);
    }
    if (mySpeedyConnector->tensionList) {
      free(mySpeedyConnector->tensionList);
    }
    free(mySpeedyConnector);
  }
}

void sonicSetRate(sonicStream mySonicStream, float rate) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 175, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->sampleRate = rate;
  sonicIntSetRate(mySonicStream, rate);
}

void sonicSetSpeed(sonicStream mySonicStream, float rate) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 183, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->globalSpeed = rate;
  sonicIntSetSpeed(mySonicStream, rate);
}


int sonicAllocateBuffers(sonicStream mySonicStream, int sampleCount){



  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 195, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  speedyStream mySpeedyStream = mySpeedyConnector->mySpeedyStream;

  mySpeedyConnector->bufferSize = speedyInputFrameStep(mySpeedyStream);
  int bufferCount = sampleCount / mySpeedyConnector->bufferSize + 1;
  if (bufferCount < (2+12)) {
      bufferCount = (2+12);
  }
  mySpeedyConnector->bufferCount = bufferCount;
  printf("Allocating %d buffers for sonic data.\n", bufferCount);
  short **bufferList = (short**) calloc(mySpeedyConnector->bufferCount,
                                         sizeof(short*));
  mySpeedyConnector->bufferList = bufferList;
  if (!bufferList) {
    return 0;
  }
  int i;
  for (i=0; i<bufferCount; i++) {
    bufferList[i] = (short *)calloc(mySpeedyConnector->bufferSize,
                                    sizeof(short)*
                                    mySpeedyConnector->channelCount);
    if (!bufferList[i]) {
      return 0;
    }
  }

  int speedyBufferSize = speedyInputFrameSize(mySpeedyStream);
  printf("speedyBufferSize is %d, sonicBufferSize is %d.\n", speedyBufferSize,
         mySpeedyConnector->bufferSize); fflush((stdout));
  mySpeedyConnector->speedyInputBuffer = (short *)calloc(speedyBufferSize,
                                                         sizeof(short));
  if (!mySpeedyConnector->speedyInputBuffer) {
    return 0;
  }

  mySpeedyConnector->tensionList =
      (float*)calloc(mySpeedyConnector->bufferCount, sizeof(float));
  if (!mySpeedyConnector->tensionList) {
      return 0;
  }
  return 1;
}


int sonicFreeSpace(speedyConnection mySpeedyConnection, int sampleCount) {
  return 1;
}







void sonicSendDataToSpeedy(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 252, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  speedyStream mySpeedyStream = (speedyStream)mySpeedyConnector->mySpeedyStream;
  int speedyBufferSize = speedyInputFrameSize(mySpeedyStream);
  int sonicBufferSize = mySpeedyConnector->bufferSize;
  int speedyFullBufferCount = speedyBufferSize/mySpeedyConnector->bufferSize;
  int partialCount = speedyBufferSize - sonicBufferSize*speedyFullBufferCount;
  ((void)((mySpeedyConnector->speedyBufferFrameIndex < mySpeedyConnector->writeBufferFrameIndex) || (__assert_fail("mySpeedyConnector->speedyBufferFrameIndex < mySpeedyConnector->writeBufferFrameIndex", "soniclib.c", 261, __func__),0)));

  ((void)((mySpeedyConnector->writeBufferFrameLocation > partialCount) || (__assert_fail("mySpeedyConnector->writeBufferFrameLocation > partialCount", "soniclib.c", 262, __func__),0)));




  int i, j, k, bufferIndex, sum;
  short* bp = mySpeedyConnector->speedyInputBuffer;
  short* wp;
  for (i=0; i<speedyFullBufferCount; i++) {
    bufferIndex = (mySpeedyConnector->speedyBufferFrameIndex + i) %
                      mySpeedyConnector->bufferCount;
    short* wp = mySpeedyConnector->bufferList[bufferIndex];
    for (j = 0; j<sonicBufferSize; j++) {
      int channelCount = mySpeedyConnector->channelCount;
      for (k = 0, sum=0; k<channelCount; k++) {
        sum += wp[j*channelCount + k];
      }
      *bp++ = sum /channelCount;
    }
  }

  bufferIndex = (mySpeedyConnector->speedyBufferFrameIndex +
                 speedyFullBufferCount) % mySpeedyConnector->bufferCount;
  wp = mySpeedyConnector->bufferList[bufferIndex];
  for (i = 0; i<partialCount; i++) {
    int channelCount = mySpeedyConnector->channelCount;
    for (j = 0, sum=0; j<channelCount; j++) {
      sum += wp[i*channelCount + j];
    }
    *bp++ = sum /channelCount;
  }
  mySpeedyConnector->speedyBufferFrameIndex++;






  speedyAddDataShort(mySpeedyStream, mySpeedyConnector->speedyInputBuffer,
                     mySpeedyConnector->writeBufferFrameIndex);
  if (mySpeedyConnector->returnSpectrogram) {

    (mySpeedyConnector->returnSpectrogram)(
        mySonicStream, mySpeedyConnector->writeBufferFrameIndex,
        speedyGetSpectrogram(mySpeedyStream));
  }
  if (mySpeedyConnector->returnNormalizedSpectrogram) {



    (mySpeedyConnector->returnNormalizedSpectrogram)(
        mySonicStream, mySpeedyConnector->writeBufferFrameIndex,
        speedyGetNormalizedSpectrogram(mySpeedyStream));
  }





  float newTension = 0.0;
  if (speedyComputeTension(mySpeedyStream,
                           mySpeedyConnector->readBufferFrameIndex,
                           &newTension)) {
    if (mySpeedyConnector->returnTension) {
      (mySpeedyConnector->returnTension)(mySonicStream,
                                         mySpeedyConnector->readBufferFrameIndex,
                                         newTension);
    }
    if (mySpeedyConnector->returnFeatures) {
      (mySpeedyConnector->returnFeatures)(mySonicStream,
                                          mySpeedyConnector->readBufferFrameIndex,
                                          speedyGetInternalState(mySpeedyStream));
    }
# 344 "soniclib.c"
    float newRate = speedyComputeSpeedFromTension(
        newTension, mySpeedyConnector->globalSpeed,
        mySpeedyConnector->speedyDurationFeedbackStrength, mySpeedyStream);

    float globalSpeed = mySpeedyConnector->globalSpeed;
    newRate = newRate * mySpeedyConnector->speedyNonlinearFactor +
              globalSpeed*(1-mySpeedyConnector->speedyNonlinearFactor);



    if (mySpeedyConnector->returnSpeed) {
      (mySpeedyConnector->returnSpeed)(mySonicStream,
                                       mySpeedyConnector->readBufferFrameIndex,
                                       newRate);
    }
    sonicIntSetSpeed(mySonicStream, newRate);
    int readIndex = mySpeedyConnector->readBufferFrameIndex %
                    mySpeedyConnector->bufferCount;
    short *readBuffer = mySpeedyConnector->bufferList[readIndex];
# 374 "soniclib.c"
    sonicIntWriteShortToStream(mySonicStream, readBuffer,
                               mySpeedyConnector->bufferSize);
    mySpeedyConnector->readBufferFrameIndex++;
  }
}
# 396 "soniclib.c"
int sonicWriteShortToStream(sonicStream mySonicStream, const short* inBuffer,
                            int sampleCount){
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 398, __func__),0)));

  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  if (!mySpeedyConnector->speedyNonlinearFactor) {
    return sonicIntWriteShortToStream(mySonicStream, inBuffer, sampleCount);
  }
  if (!mySpeedyConnector->bufferList) {
    sonicAllocateBuffers(mySonicStream, sampleCount);
  }
  speedyStream mySpeedyStream = (speedyStream)mySpeedyConnector->mySpeedyStream;
  int speedyBufferSize = speedyInputFrameSize(mySpeedyStream);
  int sonicBufferSize = mySpeedyConnector->bufferSize;
  int speedyFullBufferCount = speedyBufferSize/sonicBufferSize;



  int partialCountNeeded = speedyBufferSize -
      speedyFullBufferCount*sonicBufferSize;
  ((void)((partialCountNeeded < sonicBufferSize) || (__assert_fail("partialCountNeeded < sonicBufferSize", "soniclib.c", 417, __func__),0)));
# 432 "soniclib.c"
  while (inBuffer && sampleCount > 0) {
    int writeIndex = mySpeedyConnector->writeBufferFrameIndex %
                     mySpeedyConnector->bufferCount;
    short* writeBuffer = mySpeedyConnector->bufferList[writeIndex];
    int j, channelCount = mySpeedyConnector->channelCount;

    for (j=0; j<channelCount; j++) {
      int loc = mySpeedyConnector->writeBufferFrameLocation * channelCount;
      writeBuffer[loc+j] = *inBuffer++;
    }
    mySpeedyConnector->writeBufferFrameLocation++;
    sampleCount--;

    if (mySpeedyConnector->writeBufferFrameIndex >=
        mySpeedyConnector->speedyBufferFrameIndex+speedyFullBufferCount &&
        mySpeedyConnector->writeBufferFrameLocation == partialCountNeeded+1) {
      sonicSendDataToSpeedy(mySonicStream);
    }

    if (mySpeedyConnector->writeBufferFrameLocation >= sonicBufferSize) {
      mySpeedyConnector->writeBufferFrameLocation = 0;
      mySpeedyConnector->writeBufferFrameIndex++;
    }
  }
  return 1;
}




int sonicWriteFloatToStream(sonicStream mySonicStream, const float* inBuffer,
                            int sampleCount){
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 464, __func__),0)));

  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  if (!mySpeedyConnector->speedyNonlinearFactor) {
    return sonicIntWriteFloatToStream(mySonicStream, inBuffer, sampleCount);
  }
  if (!mySpeedyConnector->bufferList) {
    sonicAllocateBuffers(mySonicStream, sampleCount);
  }
  speedyStream mySpeedyStream = (speedyStream)mySpeedyConnector->mySpeedyStream;
  int speedyBufferSize = speedyInputFrameSize(mySpeedyStream);
  int sonicBufferSize = mySpeedyConnector->bufferSize;
  int speedyFullBufferCount = speedyBufferSize/sonicBufferSize;
  int partialCountNeeded = speedyBufferSize -
      speedyFullBufferCount*sonicBufferSize;
# 494 "soniclib.c"
  while (inBuffer && sampleCount > 0) {
    int writeIndex = mySpeedyConnector->writeBufferFrameIndex %
                     mySpeedyConnector->bufferCount;
    short* writeBuffer = mySpeedyConnector->bufferList[writeIndex];
    int j, channelCount = mySpeedyConnector->channelCount;
    for (j=0; j<channelCount; j++) {
      int loc = mySpeedyConnector->writeBufferFrameLocation * channelCount;
      writeBuffer[loc + j] = (short)(*inBuffer++ * 32768.0);
    }
    mySpeedyConnector->writeBufferFrameLocation++;
    sampleCount--;

    ((void)((partialCountNeeded < sonicBufferSize) || (__assert_fail("partialCountNeeded < sonicBufferSize", "soniclib.c", 506, __func__),0)));
    if (mySpeedyConnector->writeBufferFrameIndex >=
        mySpeedyConnector->speedyBufferFrameIndex+speedyFullBufferCount &&
        mySpeedyConnector->writeBufferFrameLocation == partialCountNeeded+1) {
      sonicSendDataToSpeedy(mySonicStream);
    }

    if (mySpeedyConnector->writeBufferFrameLocation >= sonicBufferSize) {
      mySpeedyConnector->writeBufferFrameLocation = 0;
      mySpeedyConnector->writeBufferFrameIndex++;
    }



  }
  return 1;
}

int sonicReadShortFromStream(sonicStream mySonicStream, short* outBuffer,
                             int bufferSize){
  return sonicIntReadShortFromStream(mySonicStream, outBuffer, bufferSize);
}

int sonicReadFloatFromStream(sonicStream mySonicStream, float* outBuffer,
                             int bufferSize){
  return sonicIntReadFloatFromStream(mySonicStream, outBuffer, bufferSize);
}





int sonicIntSamplesAvailable(sonicStream stream) {

    struct sonicIntStreamStruct {
        short *inputBuffer;
        short *outputBuffer;
        short *pitchBuffer;
        short *downSampleBuffer;
        float speed;
        float volume;
        float pitch;
        float rate;
        int oldRatePosition;
        int newRatePosition;
        int useChordPitch;
        int quality;
        int numChannels;
        int inputBufferSize;
        int pitchBufferSize;
        int outputBufferSize;
        int numInputSamples;
        int numOutputSamples;
        int numPitchSamples;
        int minPeriod;
        int maxPeriod;
        int maxRequired;
        int remainingInputToCopy;
        int sampleRate;
        int prevPeriod;
        int prevMinDiff;
        void *userData;
    };
    typedef struct sonicIntStreamStruct *sonicIntStream;

    if (!stream) {
        return 0;
    }
    sonicIntStream internalStream = (sonicIntStream)stream;
    return internalStream->numOutputSamples;
}

int sonicFlushStream(sonicStream mySonicStream){
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 579, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);





  while (mySpeedyConnector->readBufferFrameIndex <
         mySpeedyConnector->writeBufferFrameIndex) {
    int readIndex = mySpeedyConnector->readBufferFrameIndex %
                    mySpeedyConnector->bufferCount;
    short *curBuffer = mySpeedyConnector->bufferList[readIndex];




    sonicIntWriteShortToStream(mySonicStream, curBuffer,
                               mySpeedyConnector->bufferSize);
    mySpeedyConnector->readBufferFrameIndex++;
  }
  return sonicIntFlushStream(mySonicStream);
}


__attribute__((used)) void sonicEnableNonlinearSpeedup(sonicStream mySonicStream, float factor) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 605, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);


  mySpeedyConnector->speedyNonlinearFactor = factor;
}


__attribute__((used)) void sonicSetDurationFeedbackStrength(sonicStream mySonicStream, float factor) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 615, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);

  mySpeedyConnector->speedyDurationFeedbackStrength = factor;
}

void sonicTensionCallback(sonicStream mySonicStream,
                          tensionFunction newCallbackFunction) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 624, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->returnTension = newCallbackFunction;
}

tensionFunction getSonicTensionCallback(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 631, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  return mySpeedyConnector->returnTension;
}

void sonicSpeedCallback(sonicStream mySonicStream,
                        speedFunction newCallbackFunction) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 639, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->returnSpeed = newCallbackFunction;
}

speedFunction getSonicSpeedCallback(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 646, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  return mySpeedyConnector->returnSpeed;
}

void sonicFeaturesCallback(sonicStream mySonicStream,
                           featuresFunction newCallbackFunction) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 654, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->returnFeatures = newCallbackFunction;
}




featuresFunction getSonicFeaturesCallback(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 664, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  return mySpeedyConnector->returnFeatures;
}





void sonicSpectrogramCallback(sonicStream mySonicStream,
                             spectrogramFunction newCallbackFunction) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 676, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->returnSpectrogram = newCallbackFunction;
}

spectrogramFunction getSonicSpectrogramCallback(sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 683, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  return mySpeedyConnector->returnSpectrogram;
}






void sonicNormalizedSpectrogramCallback(
    sonicStream mySonicStream, spectrogramFunction newCallbackFunction) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 696, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  mySpeedyConnector->returnNormalizedSpectrogram = newCallbackFunction;
}

spectrogramFunction getSonicNormalizedSpectrogramCallback(
    sonicStream mySonicStream) {
  ((void)((mySonicStream) || (__assert_fail("mySonicStream", "soniclib.c", 704, __func__),0)));
  speedyConnection mySpeedyConnector =
      (speedyConnection)sonicIntGetUserData(mySonicStream);
  return mySpeedyConnector->returnNormalizedSpectrogram;
}

int sonicSpectrogramSize(sonicStream mySonicStream) {
  if (mySonicStream) {
    speedyConnection mySpeedyConnector =
        (speedyConnection)sonicIntGetUserData(mySonicStream);
    return speedyFFTSize(mySpeedyConnector->mySpeedyStream);
  } else {
    return 0;
  }
}


int getSonicBufferSize(sonicStream mySonicStream) {
  if (mySonicStream) {
    speedyConnection mySpeedyConnector =
        (speedyConnection)sonicIntGetUserData(mySonicStream);
    return mySpeedyConnector->bufferSize;
  } else {
    return 0;
  }
}


void dummyReferences() {
    sonicEnableNonlinearSpeedup(((void*)0), 0.0f);
    sonicSetDurationFeedbackStrength(((void*)0), 0.0f);
}
